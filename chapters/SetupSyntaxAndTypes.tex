
\chapter{Setup, Syntax, and Types}

\paragraph{  } In this chapter, the building and setup of Wind from source code will be discussed. We will also go over the basic syntax and data types present in the wind language. The Wind language also features several configurable options prior to compilation. The chapter will explain how to change and use those options for different scenarios.
\par From a high level perspective, Wind is compiled from a repository of C files and header files. This compilation is done via a \emph{Makefile}, which produces an executable. That executable is runnable via a terminal, and can accept command line arguments. Currently, Wind code can be run interactively, in a \emph{REPL}. Wind can also run code from strings, and with different options, produce debug and performance information.

\section{Download and Building}

\paragraph{  } The Wind source code is stored, managed, and maintained in a git repository on GitHub. If you want to download or visit the repository, you can go to the following link: \\
% link to github repo
\\
\url{https://github.com/jweinst1/Wind}

\paragraph{  } In order to download the repository to your local computer, you need to \emph{clone} it. As long as you are on a UNIX operating system, you can run the following command in your terminal:

\begin{verbatim}
$ git clone https://github.com/jweinst1/Wind.git
\end{verbatim}

\emph{Note:The "\$" as in most conventions is not part of the command, it symbolizes the current user of the terminal.}

\par Next, go through and perform each of the following steps to build Wind:

\begin{verbatim}
$ cd Wind
$ make build
\end{verbatim}

\par These commands will create a \emph{bin} directory which contains an executable named \emph{Wind}. This executable is the program that actually translates and executes Wind source code. The Wind repository does not come with any installers, but you can move the executable to any folder you wish. Later in this chapter, the different command line arguments for the executable will be discussed. However, for now, the "-h" flag will print out the health menu:

% help guide print out
\begin{verbatim}
$ ./bin/Wind -h
The Wind Programming Language Help Guide
          save command: 
               The save command allows you to save the current active data 
               to a file path. This file is written in the Wind binary format.
               Using this allows you to save and load an infinite amount of states
               that Wind can operate and run from.
               __example__: push 3 5 -> map ** 4 | + 4 -> save "nums"
               Saved at: nums
               _______________________ 
               A file named 'nums.bwind' will appear on disk. 
          load command: 
               The load command allows you to load binary wind files into the 
               current active data. 
               This command permits Wind to load data from an infinite 
               number of sources, 
               and expand it's processing capabilities to an immense degree. 
               __example__: push 3 5 -> map ** 4 | + 4 -> save "nums" ->
                           clr -> load "nums" -> out
               [ 85 629 ] 
          reduce command: 
               The reduce command fuses data through a flow of operations. 
               It can be used with operations like +.
               __example__: push 3 3 3 3 3 -> reduce + -> out
               [ 15 ] 
          filter command: 
               The filer command restricts data through a flow of operations. 
               It can be used with operations like < or > or !. 
               __example__: push 5 4 -> map + 3 | * 3 -> out -> filter > 22 -> out 
               [ 24 21 ]
               [ 24 ]
           map command: 
               The map command transforms data through a flow of operations. 
               It can be used with operations like +, - and more. 
               __example__: push 5 5 -> map + 3 | * 3 -> out 
               [ 24 24 ]
           push command: 
               The push command appends data to the end of the active data. 
               __example__: push 5 6 7 -> out 
              [ 5 6 7 ]
           out command: 
               The out command prints the entire active data to stdout. 
           clr command: 
               The clr command resets the active data.
\end{verbatim}

\subsection{Compiling Options}

\paragraph{  } Upon running the build commands for Wind, you might see some messages in your terminal that look like this:

\begin{verbatim}
gcc -c -Wall -Iinclude 
-DWindData_BUF_SIZE=50000 
-DWindData_LOAD_SIZE=10000 
-DWindComp_BUF_SIZE=2000 -c 
-o lib/flow/WindState.o src/flow/WindState.c
\end{verbatim}

\par The above message contains several definitions, which are values passed into macros of the C preprocessor. In the general sense, this allows values to be defined inside source code externally upon compilation, versus manually editing source code. In this case, all of the names appearing after $-D$ are such flags. These flags control the amount of memory used in the buffer nodes of the language internally.
\par As discussed in the beginning of this book, a unique feature of Wind is that it does not use dynamically allocated memory, also called "heap" memory. It relies on static buffers that have memory within the data segment of the executable. This allows Wind to be compiled in a scalable fashion, and it's resource be throttled or increased as needed. Additionally, this feature permits Wind to easily run on embedded systems. Although the specific C-level implementation of Wind has not been discussed yet, the following configuration options can be found in the \codeword{Makefile} of the repo: \\

\textbf{\emph{Wind Compiler Configurations}}
\begin{itemize}
\item \textbf{WindData\_LOAD\_SIZE}: \emph{This option controls the size of load buffer. In Wind, the load buffer accounts for the maximum amount of size of the arguments passed to each command. For now, commands are similar to function calls, such as $f(x, y)$. The size of this buffer is generally small, but it can be customized depending on the size of argument lists needed to be processed.}
\item \textbf{WindData\_BUF\_SIZE}: \emph{This option controls the size of the active and inactive buffers. These buffers hold the data in Wind that can actively be extended, cleared, and manipulated with various operations. The size of this option should always be larger than the load or comp buffer options.}
\item \textbf{WindComp\_BUF\_SIZE}: \emph{This option controls the size of the computation buffer. In the Wind flow, this buffer is used to temporarily store and modify data. Think of it as a larger version of a register. This config option must always be less than the load or active and inactive buffer size options.}
\end{itemize}

\par The settings of these configurations vary depend on the sizes of data you will be handling while running Wind code and whether or not you are building Wind for an embedded system. A general relationship between the different options though can be be described as:

$$
C_o << L_o < B_o
$$

where $C_o$ is the comp size option, $L_o$ is the load size option, and $B_o$ is the active and inactive buffer size option. The size of the comp option should always be \emph{far} smaller than the load option.

\section{Command Line Arguments}

\paragraph{  } The Wind executable that comes from building the language has an array of different options it can be run with for different uses. Command line options in this case are also referred to as "flags". These flags can be used alone or with additional arguments, depending on their purpose. For the following examples, the Wind code used will be: $push\: 5 \longrightarrow out$. Although specific commands in the Wind language have not been explained, we can interpret this code as: \emph{push the integer 5 onto the active buffer and write it to stdout}.

\subsection{Running Strings of Code}

\par In order to run a string of Wind source code, you can choose an option that allows you to specify a string of code as one of the command line arguments. The first of this, is the straight \emph{compile} option, written as "-c":

\begin{verbatim}
$ ./bin/Wind -c "push 5 -> out"
[ 5 ]
\end{verbatim}

Upon executing this command, the list of the active buffer is written to stdout. This is the active buffer inside the Wind runtime. The -c option can be used at any time you need to simply run a string of code. However, let's say if you want some more detailed information about the internal state of Wind, like the command, the state of the translator, and more. There is another option, $-d$:

\begin{verbatim}
$ ./bin/Wind -d "push 5 -> out"
_____Wind___Debug_______
..........State.........
Has Error: false
Mode: Command
Command: null

..........Data.........
Load Buffer: -> [ ]
Active Buffer: -> [ 5 ]
Inactive Buffer: -> [ ]

..........Computation.........
Comp Buffer: -> [ ]
________________________
\end{verbatim}

\par Using the $-d$ option runs the string of source code \emph{and} prints out debug information about the state of the Wind executor and translator. The \emph{state} tab above details the mode of translation, the current command found in the source code, and whether or not an error has been detected. This option is useful for visualizing the current data active in different buffers inside Wind. The computation buffer is separated because it always holds temporary values that are in transit between the flow. The exact structures of these buffers will be discussed in a later chapter.
\par Another option that can be used is the $-t$ option. This option

\begin{verbatim}
$ ./bin/Wind -t "push 5 -> out"
[ 5 ]
Time: 0.000081
\end{verbatim}




